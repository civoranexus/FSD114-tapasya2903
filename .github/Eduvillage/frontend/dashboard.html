<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Student Dashboard | EduVillage</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<div class="dashboard-wrapper">

  <!-- Sidebar -->
  <aside class="dashboard-sidebar">
    <h3>EduVillage</h3>
    <p>Student Dashboard</p>

    <a href="home.html">Home</a>
    <a href="courses.html">Browse Courses</a>
    <a href="dashboard.html" class="active">Dashboard</a>
    <a href="profile.html">My Profile</a>
    <a href="contact.html">Contact</a>
    <a href="#" id="logoutBtn">Logout</a>
  </aside>

  <!-- Main Content -->
  <main class="dashboard-main">

    <!-- Top Bar -->
    <div class="dashboard-topbar">
      <h2 id="welcomeText">Welcome ðŸ‘‹</h2>
    </div>

    <!-- Available Courses (Dynamic from Backend) -->
    <section class="dashboard-courses">
      <h2>Our Courses</h2>
      <div id="courseGrid" class="course-grid"></div>
    </section>

    <!-- Enrolled Courses (Static for now â€“ acceptable) -->
    <section class="dashboard-courses">
      <h2>My Learning</h2>

      <div class="course-grid">
        <div class="course-card">
          <h3>HTML Basics</h3>
          <p>Progress: 60%</p>
          <progress value="60" max="100"></progress>
          <button>Continue</button>
        </div>

        <div class="course-card">
          <h3>CSS Fundamentals</h3>
          <p>Progress: 30%</p>
          <progress value="30" max="100"></progress>
          <button>Continue</button>
        </div>

        <div class="course-card">
          <h3>JavaScript Basics</h3>
          <p>Progress: 100%</p>
          <progress value="100" max="100"></progress>
          <button>View Certificate</button>
        </div>
      </div>
    </section>

  </main>

</div>

<!-- DASHBOARD SCRIPT -->
<script>
  // ðŸ” Check login
  const user = JSON.parse(localStorage.getItem("user"));

  if (!user) {
    window.location.href = "login.html";
  } else {
    document.getElementById("welcomeText").textContent =
      `Welcome, ${user.name} ðŸ‘‹`;
  }

  // ðŸšª Logout
  document.getElementById("logoutBtn").addEventListener("click", () => {
    localStorage.removeItem("user");
    window.location.href = "login.html";
  });

  // ðŸ“¦ Load courses from backend
  async function loadCourses() {
    try {
      const response = await fetch("http://localhost:5000/api/courses");
      const courses = await response.json();

      const grid = document.getElementById("courseGrid");
      grid.innerHTML = "";

      if (courses.length === 0) {
        grid.innerHTML = "<p>No courses available</p>";
        return;
      }

      courses.forEach(course => {
        const card = document.createElement("div");
        card.className = "course-card";

        card.innerHTML = `
          <h3>${course.title}</h3>
          <p>${course.category}</p>
          <p>${course.description}</p>
          <button>View Course</button>
        `;

        grid.appendChild(card);
      });
    } catch (error) {
      console.error("Failed to load courses", error);
    }
  }

  loadCourses();
</script>

</body>
</html>
